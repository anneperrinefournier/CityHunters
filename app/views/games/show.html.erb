<div data-controller="game"
  data-game-target="pageHandle"
  data-game-id-value="<%= @game.id %>"
  data-game-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
  data-game-markers-value="<%= @markers.to_json %>"
  data-game-participations-markers-value="<%= @participations_markers.to_json %>"
  data-game-participation-id-value="<%= current_user.find_participation_for(@game).id %>">


  <div class="container">
    <div class="riddles-container d-none" data-game-target="riddlesHandle">
      <%= render 'game_state', game: @game %>
    </div>

    <div class="mt-3 mb-3 story-introduction" data-game-target="introduction">
      <h1>Introduction</h1>
      <%= cl_image_tag @storyline.photo.key, alt: (@storyline.title + "-picture"), id: "storyline-picture-intro", class: "storyline-picture-card" %>
      <p><%= @storyline.introduction %></p>
      <div class="d-flex justify-content-center">
        <button class="btn btn-primary" data-action="click->game#closeIntroduction">C'est parti!</button>
      </div>
    </div>

    <button data-action="click->game#sendData">SEND</button>
    <div class="map-position">
      <%= render 'map' %>
    </div>

    <div class="mt-3 mb-3 d-none" data-game-target="endGameButton">
      <button class="btn btn-danger" data-action="click->game#endGame">Fin de partie</button>
    </div>
  </div>
</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
