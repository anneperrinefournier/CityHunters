<div style= "width: 100vw; overflow-x: hidden;">

<div data-controller="game"
  data-game-target="pageHandle"
  data-game-id-value="<%= @game.id %>"
  data-game-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
  data-game-markers-value="<%= @markers.to_json %>"
  data-game-participations-markers-value="<%= @participations_markers.to_json %>"
  data-game-participation-id-value="<%= current_user.find_participation_for(@game).id %>">


 <div style="width: 200vw; display: flex; transition: all ease 0.5s;" data-controller="swipe-map" data-swipe-map-target="unroll">
    <div style="width: 100vw; height: 100vh; overflow: hidden;">
      <div class="container">
        <div class="riddles-container d-none" data-game-target="riddlesHandle">
          <%= render 'game_state', game: @game %>
        </div>

        <div class="mt-3 mb-3 story-introduction" data-game-target="introduction">
          <h1>Introduction</h1>
          <%= cl_image_tag @storyline.photo.key, alt: (@storyline.title + "-picture"), id: "storyline-picture-intro", class: "storyline-picture-card" %>
          <p><%= @storyline.introduction %></p>
          <div class="d-flex justify-content-center">
            <button class="btn btn-primary" data-action="click->game#closeIntroduction">C'est parti!</button>
          </div>
        </div>
      </div>
  </div>

    <div class="rectangle-swipe" data-action="click->swipe-map#swipe">
      <p data-swipe-map-target="police">show the map</p>
    </div>
  <div class="parent" style="width: 100vw; height: 100vh;">
    <div class="container">
        <a class="arrow right">
        </a>
        <%= render 'map' %>

        <div class="mt-3 mb-3 d-none" data-game-target="endGameButton">
          <button class="btn btn-danger" data-action="click->game#endGame">Fin de partie</button>
        </div>
    </div>
  </div>
</div>

</div>
